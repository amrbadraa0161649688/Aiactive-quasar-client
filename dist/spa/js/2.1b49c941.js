(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"024d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("tool-bar",{attrs:{moduleName:t.moduleName}}),a("q-scroll-area",{staticClass:"q-scroll-area-matching",style:t.lprData.length>0?"background-color:#e5e5e5":""},[t.lprData.length?a("lpr-table"):a("empty-state")],1)],1)},s=[],n=a("ded3"),o=a.n(n),l=a("2f62"),r={data(){return{moduleName:"toll-gates-module"}},components:{"tool-bar":a("5bd4").default,"lpr-table":a("ceec").default,"no-data":a("28d6").default,loading:a("c5e0").default,pagination:a("f836").default,"empty-state":a("2101").default},watch:{autoUpdateTransits:function(t,e){t&&(this.$socket.emit("join","generic-lpr-module"),this.sendMetaData(!0),this.listenToLprHub()),t||(this.$socket.emit("leave","generic-lpr-module"),this.stopListenToLprHub())},paginationLimit:function(t,e){t&&this.updateTransits&&this.sendMetaData()},paginationPage:function(t,e){t&&this.updateTransits&&this.sendMetaData()},confidenceLimit:function(t,e){t&&this.updateTransits&&(console.log("confidence limit changed",this.filters),this.sendMetaData())},speedLimit:function(t,e){console.log("speed limit changed",t,e),t&&this.updateTransits&&(console.log("speed limit changed",t),this.sendMetaData())},confirmed:function(t,e){t&&this.updateTransits&&(console.log("confirmed filter changed",this.filters),this.sendMetaData())}},methods:o()(o()(o()({},Object(l["b"])("devices",["getDevices"])),Object(l["b"])("lpr",["getLprData","setModuleName","setPagination","updateLprData","setDeviceFilter","getDistinctDates"])),{},{sendMetaData(t){let e=o()({},this.pagination);t&&(e.page=1),this.$socket.emit("meta_update",{pagination:e,filters:{confidenceFilter:parseInt(this.confidenceLimit),speedFilter:parseInt(this.speedLimit),confirmedFilter:this.confirmed}})},listenToLprHub(){this.sockets.subscribe("lpr_transits",t=>{this.updateLprData(t)})},stopListenToLprHub(){this.sockets.unsubscribe("lpr_transits"),console.log("Stop listning to lpr_transits channel")}}),mounted(){this.setModuleName(this.moduleName),this.getDistinctDates(),this.getDevices(),setTimeout(()=>{this.setDeviceFilter(this.moduleActiveDevices)},1500)},destroyed(){this.setModuleName(" "),this.$socket.emit("leave","generic-lpr-module")},computed:o()(o()(o()(o()({},Object(l["d"])("lpr",["pagination","filters","updateTransits","lprDataDownloaded"])),Object(l["c"])("lpr",["sortedTransits","paginationData"])),Object(l["c"])("devices",["getModuleActiveDevices"])),{},{autoUpdateTransits:{get(){return this.updateTransits},set(t){this.setUpdateTransits(t)}},lprData(){return this.sortedTransits},moduleActiveDevices(){return this.getModuleActiveDevices(this.moduleName)},paginationLimit(){return this.pagination.limit},paginationPage(){return this.pagination.page},confidenceLimit(){return this.filters.confidence_number.isActive?this.filters.confidence_number.data:"0"},speedLimit(){return this.filters.speed.isActive?this.filters.speed.data:"0"},confirmed(){return this.filters.confirmed.isActive?"true":"false"}})},c=r,d=(a("9995"),a("2877")),u=a("9989"),p=a("4983"),m=a("eebe"),g=a.n(m),h=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=h.exports;g()(h,"components",{QPage:u["a"],QScrollArea:p["a"]})},"05bf":function(t,e,a){},"1bef":function(t,e,a){"use strict";var i=a("c522"),s=a.n(i);s.a},3097:function(t,e,a){"use strict";var i=a("ee37"),s=a.n(i);s.a},"47af":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"row",staticStyle:{width:"2560px","max-width":"940vw","font-size":"3vmin","background-color":"black"}},[a("div",{staticClass:"col"},[a("div",{staticClass:" text-weight-bold"},[a("div",{staticStyle:{"text-align":"center !important",color:"white",margin:"10px"}},[t._v("\n        "+t._s(t.activeCarousel.date_time)+"\n      ")])]),a("div",{staticClass:"display: flex"},[a("img",{staticClass:" plate-image-preview",staticStyle:{margin:"auto","margin-top":"50px"},attrs:{src:t.activeCarousel.path+"/"+t.activeCarousel.source2,transition:"slide-right"}})])]),a("q-img",{staticClass:"col",attrs:{src:t.activeCarousel.path+"/"+t.activeCarousel.source1,transition:"slide-left"}},[a("div",{staticClass:"absolute-top text-weight-bold"},[a("div",{staticClass:"absolute-center"},[t._v("\n        "+t._s(t.activeCarousel.plate_number.split("").join(" "))+"\n      ")])]),a("div",{staticClass:"absolute-bottom text-center text-weight-bold"},[a("div",[t._v("Brand: "+t._s(t.activeCarousel.brand))]),a("div",[t._v("Model: "+t._s(t.activeCarousel.model))]),a("div",[t._v("Colour: "+t._s(t.activeCarousel.color))])])])],1)},s=[],n={props:["activeCarousel"]},o=n,l=(a("1bef"),a("2877")),r=a("f09f"),c=a("068f"),d=a("eebe"),u=a.n(d),p=Object(l["a"])(o,i,s,!1,null,"2d6dc006",null);e["default"]=p.exports;u()(p,"components",{QCard:r["a"],QImg:c["a"]})},9995:function(t,e,a){"use strict";var i=a("05bf"),s=a.n(i);s.a},c522:function(t,e,a){},ceec:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{data:t.lprData,pagination:t.paginationRename,columns:"/gatesModule"!=t.$route.path?t.columns.concat(t.imageCol):t.columns,"row-key":"name"},on:{"update:pagination":function(e){t.paginationRename=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-btn",{attrs:{color:"primary","icon-right":"archive",label:t.$t("ExportCSV"),"no-caps":""},on:{click:t.exportTable}})]},proxy:!0},{key:"header",fn:function(e){return[a("q-tr",{attrs:{props:e}},t._l(e.cols,(function(i){return a("q-th",{key:i.name,staticStyle:{"font-size":"15px"},attrs:{props:e}},[t._v("\n          "+t._s(i.label)+"\n        ")])})),1)]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(a){return t.setCarousel(e.row)}}},t._l(e.cols,(function(i){return a("q-td",{key:i.name,staticStyle:{"font-size":"15px"},attrs:{props:e}},["Image"!=i.name&&"Plate_Image"!=i.name?a("span",[t._v("\n            "+t._s(i.value))]):t._e(),"Image"==i.name?a("q-avatar",{staticClass:"shadow-10",attrs:{size:"50px"}},[a("img",{attrs:{src:e.row.path+"/"+e.row.source2}})]):t._e(),"Plate_Image"==i.name?a("q-avatar",{staticClass:"shadow-10 plate-image",attrs:{size:"70px",square:""}},[a("img",{attrs:{src:e.row.path+"/"+e.row.source2}})]):t._e(),"Vehicle_Image"==i.name?a("q-avatar",{staticClass:"shadow-10 plate-image",attrs:{size:"70px",square:""}},[a("img",{attrs:{src:e.row.path+"/"+e.row.source1}})]):t._e()],1)})),1)]}}])}),a("q-dialog",{model:{value:t.carousel,callback:function(e){t.carousel=e},expression:"carousel"}},[a("popupModal",{attrs:{activeCarousel:t.activeCarousel}})],1)],1)},s=[],n=a("ded3"),o=a.n(n),l=a("2f62"),r=a("a357");function c(t,e){let a=void 0!==e?e(t):t;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),`"${a}"`}var d={data(){return{carousel:!1,activeCarousel:[],columns:[{name:"ID",required:!0,label:this.$t("ID"),field:t=>t.id,align:"left",format:t=>""+t,sortable:!0},{name:"Plate No.",required:!0,label:this.$t("PlateNo"),field:t=>t.plate_number,align:"center",format:t=>"‭‬"==t||null==t?"N/A":t.split("").join(" "),sortable:!0,style:"background-color:#ddd ; font-weight: bold;"},{name:"Plate_Image",label:this.$t("PlateImage"),field:"plate_image",style:"width: 5px"},{name:"Vehicle_Image",label:this.$t("vehicleImage"),field:"vehicle_image",style:"width: 5px"},{name:"Date",label:this.$t("Date"),field:t=>t.date_time,align:"center",sortable:!0},{name:"Brand",label:this.$t("Brand"),field:t=>t.brand,align:"center",sortable:!0},{name:"Model",label:this.$t("Model"),field:t=>t.model,align:"center",sortable:!0},{name:"Color",label:this.$t("Color"),field:t=>t.color,align:"center",sortable:!0}],imageCol:[{name:"Image",label:this.$t("Image"),field:"image",style:"width: 5px"}]}},components:{popupModal:a("47af").default},methods:o()(o()({},Object(l["b"])("lpr",["setPagination"])),{},{setCarousel(t){this.activeCarousel=t,this.carousel=!0},onRequest(t){const{page:e,rowsPerPage:a,sortBy:i,descending:s}=t.pagination;this.paginationRename.rowsNumber;this.setPagination({page:e,limit:a})},exportTable(){const t=[this.columns.map(t=>c(t.label))].concat(this.lprData.map(t=>this.columns.map(e=>c("function"===typeof e.field?e.field(t):t[void 0===e.field?e.name:e.field],e.format)).join(","))).join("\r\n"),e=Object(r["a"])("table-export.csv",t,"text/csv");!0!==e&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}}),computed:o()(o()({},Object(l["c"])("lpr",["sortedTransits","paginationRename"])),{},{lprData(){return this.sortedTransits}})},u=d,p=(a("3097"),a("2877")),m=a("eaac"),g=a("9c40"),h=a("bd08"),f=a("357e"),b=a("db86"),v=a("cb32"),_=a("24e8"),C=a("eebe"),w=a.n(C),D=Object(p["a"])(u,i,s,!1,null,"12fe5054",null);e["default"]=D.exports;w()(D,"components",{QTable:m["a"],QBtn:g["a"],QTr:h["a"],QTh:f["a"],QTd:b["a"],QAvatar:v["a"],QDialog:_["a"]})},ee37:function(t,e,a){}}]);