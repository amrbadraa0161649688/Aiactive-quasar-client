(function(e){function t(t){for(var o,s,n=t[0],d=t[1],l=t[2],c=0,p=[];c<n.length;c++)s=n[c],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);g&&g(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],o=!0,s=1;s<a.length;s++){var n=a[s];0!==r[n]&&(o=!1)}o&&(i.splice(t--,1),e=d(d.s=a[0]))}return e}var o={},s={3:0},r={3:0},i=[];function n(e){return d.p+"js/"+({1:"chunk-common"}[e]||e)+"."+{1:"f28888a1",2:"1b49c941",4:"77574baa",5:"3ca68cb2",6:"c1e88da4",7:"53504661",8:"0d66eb8b",9:"f3356ade",10:"41f1ef93",11:"d42628f5",12:"b899f335",13:"d8eca0e9",14:"a74f8019"}[e]+".js"}function d(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,d),a.l=!0,a.exports}d.e=function(e){var t=[],a={1:1,2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var o="css/"+({1:"chunk-common"}[e]||e)+"."+{1:"d858a474",2:"d84efe62",4:"bdf97c55",5:"21efd8dd",6:"1b26b02c",7:"984f1ec7",8:"165d160c",9:"ff79ae33",10:"e212b010",11:"bb1ecc89",12:"31d6cfe0",13:"31d6cfe0",14:"31d6cfe0"}[e]+".css",r=d.p+o,i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var l=i[n],c=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===o||c===r))return t()}var p=document.getElementsByTagName("style");for(n=0;n<p.length;n++){l=p[n],c=l.getAttribute("data-href");if(c===o||c===r)return t()}var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.onload=t,g.onerror=function(t){var o=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete s[e],g.parentNode.removeChild(g),a(i)},g.href=r;var u=document.getElementsByTagName("head")[0];u.appendChild(g)})).then((function(){s[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,a){o=r[e]=[t,a]}));t.push(o[2]=i);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,d.nc&&c.setAttribute("nonce",d.nc),c.src=n(e);var p=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(g);var a=r[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",p.name="ChunkLoadError",p.type=o,p.request=s,a[1](p)}r[e]=void 0}};var g=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},d.m=e,d.c=o,d.d=function(e,t,a){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(d.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)d.d(a,o,function(t){return e[t]}.bind(null,o));return a},d.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="",d.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var g=c;i.push([0,0]),a()})({0:function(e,t,a){e.exports=a("2f39")},"0047":function(e,t,a){},"1a07":function(e,t,a){"use strict";a.r(t),t["default"]={API_URL:"http://localhost:3000"}},"2f39":function(e,t,a){"use strict";a.r(t);a("e6cf"),a("5319"),a("573e"),a("7d6e"),a("e54f"),a("1c10"),a("7bb2"),a("4848"),a("c382"),a("21cb"),a("3e27"),a("985d"),a("0047");var o=a("2b0e"),s=a("13ef"),r=a("42d2"),i=a("b05d"),n=a("18d6"),d=a("f508"),l=a("436b"),c=a("2a19"),p=a("b12a");o["default"].use(i["a"],{config:{},lang:s["default"],iconSet:r["a"],plugins:{LocalStorage:n["a"],Loading:d["a"],Dialog:l["a"],Notify:c["a"],AppFullscreen:p["a"]}});var g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"q-app"}},[a("router-view")],1)},u=[],m=a("ded3"),h=a.n(m),v=a("2f62"),_={methods:h()({},Object(v["b"])("auth",["handleBootUserAuth"])),sockets:{connect:function(){console.log("Connected To Socket Server ..")}},mounted(){this.handleBootUserAuth()}},f=_,D=a("2877"),S=Object(D["a"])(f,g,u,!1,null,null,null),A=S.exports,w=a("39c6"),b=a.n(w),y=a("bc3a"),T=a.n(y);function P(e){d["a"].hide(),l["a"].create({title:"Error",message:e})}const I={serverStatus:"offline"},U={setServerStatus(e,t){e.serverStatus=t}},M={getServerStatus({dispatch:e}){setTimeout(()=>{const t=b.a.API_URL+"/srv_pingPong",a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.post(t,{headers:o}).then(t=>{console.log(t.data),"ok"===t.data?e("setServerStatus","online"):e("setServerStatus","offline")}).catch(t=>{e("setServerStatus","offline")})},500)},updateServerInfo({dispatch:e},t){d["a"].show();let a=t.serverIp+":"+t.serverPortNumber;t.serverHost=a,setTimeout(()=>{const o=a+"/srv_pingPong",s=n["a"].getItem("loggedInUserToken"),r={"Content-Type":"application/json",Authorization:"Bearer "+s};T.a.post(o,{headers:r}).then(a=>{console.log(a.data),"ok"===a.data?e("handleServerStatusChange",t):e("setServerStatus","offline")}).catch(a=>{e("handleServerStatusChange",t)})},500)},handleServerStatusChange({},e){n["a"].set("serverUrl",e.serverIp),n["a"].set("serverPort",e.serverPortNumber),n["a"].set("serverHost",e.serverHost),d["a"].hide(),location.reload()},setServerStatus({commit:e},t){e("setServerStatus",t)}},L={};var R={namespaced:!0,state:I,mutations:U,actions:M,getters:L},E=a("3cc2");const k={loggedIn:!1,userData:{},navs:E["a"]},C={setNavs(e,t){e.navs=t},setLoggedIn(e,t){e.loggedIn=t},setUserData(e,t){Object.assign(e.userData,t),t||Object.keys(e.userData).forEach(t=>e.userData[t]="")}},O={registerUser({},e){},loginUser({dispatch:e},t){d["a"].show(),setTimeout(()=>new Promise((a,o)=>{let s=b.a.API_URL+"/login";T.a.post(s,{email:t.email,password:t.password}).then(t=>{let a=t.data;e("handleAuthStateChange",a)}).catch(e=>{"Network Error"!=e.message?401!==e.response.status&&404!==e.response.status||P(e.response.data.message):P("Server Offline")})}),500)},logoutUser({dispatch:e}){console.log("logoutUser");let t={auth:!1};e("handleAuthStateChange",t)},handleAuthStateChange({commit:e},t){d["a"].hide(),t.auth?(e("setLoggedIn",!0),e("setUserData",t.user),n["a"].set("loggedIn",!0),n["a"].set("loggedInUser",t.user),n["a"].set("loggedInUserToken",t.token),this.$router.push({name:this.$router.currentRoute.query.redirect||"homePage"})):(e("setLoggedIn",!1),e("setUserData",!1),n["a"].remove("loggedIn"),n["a"].remove("loggedInUser"),n["a"].remove("loggedInUserToken"),this.$router.replace("/auth"))},handleBootUserAuth({commit:e}){let t=n["a"].getItem("loggedIn"),a=n["a"].getItem("loggedInUser");t&&(e("setLoggedIn",t),e("setUserData",a))},setNavs({commit:e},t){e("setNavs",t)}},j={loggedInStatus(e){return e.loggedIn}};var F={namespaced:!0,state:k,mutations:C,actions:O,getters:j};a("4e82"),a("a434"),a("ddb0");const x={moduleName:" ",lprData:[],searchedData:[],activeDevices:[],distinctDates:[],activeDateTime:{startDate:"",endDate:""},pagination:{limit:10,page:1,totalPages:3},filters:{dateTime:{isActive:!1,data:""},confidence_number:{isActive:!1,data:60},speed:{isActive:!1,data:10},confirmed:{isActive:!0}},sorters:{id:{isActive:!0,type:"DESC"},speed:{isActive:!1,type:"DESC"},confidence_number:{isActive:!1,type:"ASC"}},updateTransits:!1,lprDataDownloaded:!1,searchFlag:!1},N={addLpr(e,t){e.lprData.push(t)},updateLpr(e,t){const a=e.lprData.findIndex(e=>e.id==t.id);t.hasOwnProperty("plate_number")&&(e.lprData[a].plate_number=t.plate_number),t.hasOwnProperty("confirmed")&&(e.lprData[a].confirmed=t.confirmed)},updateLprFields(e,t){const a=t.fields,o=t.lprData,s=e.lprData.findIndex(e=>e.id==o.id);o.hasOwnProperty(a)&&(e.lprData[s][a]=o[a])},addSearchedLpr(e,t){e.searchedData.push(t)},clearLprData(e){e.lprData.splice(0,e.lprData.length)},clearSearchedData(e){e.searchedData.splice(0,e.searchedData.length)},clearDistinctDates(e){e.distinctDates.splice(0,e.distinctDates.length)},fixArrayLength(e){console.log("removing first element"),e.lprData.sort((function(e,t){return e.id-t.id})),e.lprData.shift()},addDistinctDates(e,t){t.forEach(t=>{e.distinctDates.push(t.date)})},setModuleName(e,t){e.moduleName=t},setActiveDateTime(e,t){Object.assign(e.activeDateTime,t)},setPagination(e,t){Object.assign(e.pagination,t)},setDeviceFilter(e,t){e.activeDevices.splice(0,e.activeDevices.length),t.forEach(t=>{e.activeDevices.push(t)})},setFilter(e,t){let a=t.filterName;Object.assign(e.filters[a],t.filterData)},setSorter(e,t){let a=t.activeSorter;"undefined"!==typeof a&&(e.sorters[a].isActive=!1);let o=t.sorterName;Object.assign(e.sorters[o],t.sorterData)},setUpdateTransits(e,t){e.updateTransits=t},setLprDataDownloaded(e,t){e.lprDataDownloaded=t},setSearchFlag(e,t){e.searchFlag=t}},$={getLprData({commit:e,dispatch:t,getters:a}){t("setLprDataDownloaded",!1);const o=a.getActiveFilter.hasOwnProperty("confidence_number")?x.filters.confidence_number.data:0,s=a.getActiveFilter.hasOwnProperty("speed")?x.filters.speed.data:0,r=a.getActiveFilter.hasOwnProperty("confirmed")?x.filters.confirmed.isActive:"";e("clearLprData"),setTimeout(()=>{const a=b.a.API_URL+"/lpr"+`?npp=${x.pagination.limit}&page=${x.pagination.page}\n                   &startDate=${x.activeDateTime.startDate}&endDate=${x.activeDateTime.endDate}\n                   &confidenceFilter=${o}&speedFilter=${s}\n                   &confirmedFilter=${r}`,i=n["a"].getItem("loggedInUserToken"),d={"Content-Type":"application/json",Authorization:"Bearer "+i};T.a.get(a,{headers:d}).then(a=>{console.log("success --",a.data);let o=a.data.pagination,s=a.data.results;t("setLprDataDownloaded",!0),t("handleStateLprData",s),s.length>0&&e("setPagination",{limit:o.perPage,page:o.current,totalPages:o.numPages})}).catch(e=>{P(e.message)})},300)},updateLprData({commit:e,dispatch:t,getters:a},o){t("handleStateLprData",o.results),o.results.length>0&&(e("setPagination",{totalPages:o.pagination.numPages,limit:o.pagination.perPage,page:o.pagination.current}),x.lprData.length>x.pagination.limit&&e("fixArrayLength"))},getDistinctDates({commit:e}){setTimeout(()=>{const t=b.a.API_URL+"/lpr_distinctDates",a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.get(t,{headers:o}).then(t=>{let a=t.data;e("clearDistinctDates"),e("addDistinctDates",a)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},500)},searchLprData({dispatch:e,commit:t},a){t("clearLprData"),t("clearSearchedData"),e("setSearchFlag",!0),e("setUpdateTransits",!1),setTimeout(()=>{const t=b.a.API_URL+"/lpr_search",o=n["a"].getItem("loggedInUserToken"),s={"Content-Type":"application/json",Authorization:"Bearer "+o};let r={plateNumber:a};T.a.post(t,r,{headers:s}).then(t=>{let a=t.data;c["a"].create(`Found ( ${a.length} ) Plates Matches your search`),e("handleStateSearchedData",a),e("setLprDataDownloaded",!0)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},500)},editLprPlateNumber({commit:e,dispatch:t},a){t("setLprDataDownloaded",!1),setTimeout(()=>{const o=b.a.API_URL+"/lpr/"+a.id,s=n["a"].getItem("loggedInUserToken"),r={"Content-Type":"application/json",Authorization:"Bearer "+s};T.a.put(o,a,{headers:r}).then(o=>{console.log("Edit Plate success..");const s=o.data;t("setLprDataDownloaded",!0),0!=s.affectedRows?(c["a"].create(`Updated Plate Number to ( ${a.plate_number} )Success..`),e("updateLpr",a)):c["a"].create(`Sorry Can't Update ( ${a.plate_number} ) Right Now..`)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},500)},confirmLprPlate({commit:e,dispatch:t},a){t("setLprDataDownloaded",!1),setTimeout(()=>{const e=b.a.API_URL+"/lpr/"+a.id,o=n["a"].getItem("loggedInUserToken"),s={"Content-Type":"application/json",Authorization:"Bearer "+o};T.a.put(e,a,{headers:s}).then(e=>{console.log("Confirm success..");const o=e.data;t("setLprDataDownloaded",!0),0!=o.affectedRows?(c["a"].create(`( ${a.id} ) Confirmation Success..`),t("getLprData")):c["a"].create(`Sorry Can't Confirm ( ${a.id} ) Right Now..`)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},100)},printLprData({commit:e},t){console.log("printing record",t),setTimeout(()=>{const e=b.a.API_URL+"/lpr_print?recordData",a=encodeURIComponent(JSON.stringify(t)),o=e+a;window.open(o,"popUpWindow","height=800, width=650, left=300, top=100, resizable=yes, scrollbars=yes, toolbar=yes, menubar=no, location=no, directories=no, status=yes")},500)},setActiveDateTime({commit:e,dispatch:t},a){e("setActiveDateTime",a),t("setUpdateTransits",!1),t("setPagination",{activeDateTime:!0,page:1})},setPagination({commit:e,dispatch:t},a){let o=a.activeDateTime||!1,s=!0,r=Object.keys(a);r.forEach(e=>{a[e]!=x.pagination[e]&&(s=!1)}),s&!o||(x.pagination.page!=a.page&&e("clearLprData"),console.log("pagination",a),e("setPagination",a),!x.updateTransits&!x.searchFlag&&t("getLprData"),x.searchFlag&&t("handleStateSearchedData",[]))},setFilter({commit:e,dispatch:t},a){t("setLprDataDownloaded",!1),e("clearLprData"),e("setFilter",a),!x.updateTransits&!x.searchFlag&&t("getLprData"),x.searchFlag&&t("handleStateSearchedData",[])},setDeviceFilter({commit:e},t){e("setDeviceFilter",t)},setSorter({commit:e,getters:t},a){let o=t.getActiveSorter,s=Object.keys(o);a.activeSorter=s[0],e("setSorter",a)},setModuleName({commit:e},t){e("setModuleName",t)},handleStateLprData({commit:e,dispatch:t,getters:a},o){o.forEach(t=>{if(a.lpr_id.includes(t.id)){if(a.lpr_id.includes(t.id)&&"toll-gates-module"==x.moduleName){const a="source2",o=x.lprData.findIndex(e=>e.id==t.id);x.lprData[o][a]!=t[a]&&(console.log("personImageUpdated",t[a]),e("updateLprFields",{fields:a,lprData:t}))}}else e("addLpr",t)}),t("setLprDataDownloaded",!0)},handleStateSearchedData({commit:e,dispatch:t,getters:a},o){o.forEach(t=>{e("addSearchedLpr",t)}),e("setPagination",{totalPages:Math.ceil(x.searchedData.length/x.pagination.limit)});let s=a.paginatedTransits(x.searchedData);t("handleStateLprData",s),t("setLprDataDownloaded",!0)},setUpdateTransits({commit:e,dispatch:t},a){a&&(e("clearLprData"),t("setLprDataDownloaded",!1)),e("setUpdateTransits",a)},setLprDataDownloaded({commit:e},t){d["a"].hide(),t||d["a"].show(),e("setLprDataDownloaded",t)},setSearchFlag({commit:e,dispatch:t},a){a||(e("setPagination",{page:1}),t("getLprData")),e("setSearchFlag",a)}},B={lpr_id:e=>e.lprData.map(e=>e.id),updateTransits:e=>e.updateTransits,paginationData:e=>e.pagination,getActiveSorter:e=>{let t=Object.keys(e.sorters),a={};return t.forEach(t=>{e.sorters[t].isActive&&(a[t]=e.sorters[t])}),a},getActiveFilter:e=>{let t=Object.keys(e.filters),a={};return t.forEach(t=>{e.filters[t].isActive&&(a[t]=e.filters[t])}),a},filteredTransitsByDevices:(e,t)=>{let a=e.lprData,o=e.activeDevices;return a=a.filter(e=>o.some(t=>t===e.device_name)),a},filteredTransits:(e,t)=>{},sortedTransits:(e,t)=>{let a=Array.from(t.filteredTransitsByDevices),o=t.getActiveSorter;if(Object.keys(o).length>0){let e=Object.keys(o)[0],t=o[e].type,s=1,r=-1;"DESC"==t&&(s=-1,r=1),a.sort((t,a)=>{let o=0,i=parseInt(t[e]),n=parseInt(a[e]);return i>n?o=s:n>i&&(o=r),o})}return a},paginatedTransits:e=>t=>{const a=function(e,t,a){return t=Math.abs(parseInt(t)),t=t>0?t-1:t,a=parseInt(a),a=a<1?1:a,[...e.filter((e,o)=>o>=t*a&&o<(t+1)*a)]};let o=t,s=e.pagination,r=a(o,s.page,s.limit);return r},paginationRename:e=>{let t=e.pagination.totalPages*e.pagination.limit,a={page:e.pagination.page,rowsPerPage:e.pagination.limit,rowsNumber:t,sortBy:"ID",descending:!1};return a}};var z={namespaced:!0,state:x,mutations:N,actions:$,getters:B};const V={users:[],showAddUserModal:!1,showEditUserModal:!1},G={addUser(e,t){e.users.push(t)},updateUser(e,t){let a=e.users.findIndex(e=>e.id==t.id);o["default"].set(e.users,a,t)},deleteUser(e,t){let a=e.users.findIndex(e=>e.id==t);o["default"].delete(e.users,a)},setAddUserModal(e,t){e.showAddUserModal=t},setEditUserModal(e,t){e.showEditUserModal=t}},K={getUsers({dispatch:e}){d["a"].show(),setTimeout(()=>{const t=b.a.API_URL+"/users",a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.get(t,{headers:o}).then(t=>{let a=t.data;e("handleStateUsers",a)}).catch(e=>{P(e.message)})},500)},addUser({commit:e,dispatch:t},a){d["a"].show(),setTimeout(()=>{const o=b.a.API_URL+"/users",s=n["a"].getItem("loggedInUserToken"),r={"Content-Type":"application/json",Authorization:"Bearer "+s};T.a.post(o,a,{headers:r}).then(a=>{e("addUser",a.data.user),t("setAddUserModal",!1),d["a"].hide(),c["a"].create("User Successfully Added!")}).catch(e=>{console.log(e),P(e.message)})},500)},updateUser({commit:e,dispatch:t},a){d["a"].show(),setTimeout(()=>{const o=b.a.API_URL+"/users/"+a.id,s=n["a"].getItem("loggedInUserToken"),r={"Content-Type":"application/json",Authorization:"Bearer "+s};T.a.put(o,a,{headers:r}).then(o=>{e("updateUser",a),t("setEditUserModal",!1),d["a"].hide(),c["a"].create("User Updated!")}).catch(e=>{console.log(e),P(e.message)})},500)},deleteUser({commit:e},t){d["a"].show(),setTimeout(()=>{const a=b.a.API_URL+"/users/"+t,o=n["a"].getItem("loggedInUserToken"),s={"Content-Type":"application/json",Authorization:"Bearer "+o};T.a.delete(a,{headers:s}).then(a=>{e("deleteUser",t),d["a"].hide(),c["a"].create("User Deleted!")}).catch(e=>{console.log(e),P(e.message)})},500)},handleStateUsers({commit:e,getters:t},a){d["a"].hide(),a.forEach(a=>{t.user_id.includes(a.id)||e("addUser",a)})},setAddUserModal({commit:e},t){e("setAddUserModal",t)},setEditUserModal({commit:e},t){e("setEditUserModal",t)}},q={user_id:e=>e.users.map(e=>e.id),showAddUserModal:e=>e.showAddUserModal,showEditUserModal:e=>e.showEditUserModal};var Y={namespaced:!0,state:V,mutations:G,actions:K,getters:q};a("e01a");const Z={Devices:[],devicesList:[],systemModules:[{label:"Generic Lpr Module",value:"generic-lpr-module",devices:[]},{label:"Matching Lpr Module",value:"match-module",devices:[]},{label:"Average Speed Module",value:"average-speed-module",devices:[]},{label:"Toll Gates Module",value:"toll-gates-module",devices:[]},{label:"VMS",value:"VMS-module",devices:[]}],showAddDeviceModal:!1,showEditDeviceModal:!1},H={addDevice(e,t){e.Devices.push(t)},addDeviceList(e,t){e.devicesList.push(t)},addSystemModuleDevice(e,t){t.deviceModule.forEach(a=>{let o=e.systemModules.findIndex(e=>e.value===a.value);e.systemModules[o].devices.push(t)})},clearDevicesData(e){e.Devices.splice(0,e.Devices.length),e.devicesList.splice(0,e.devicesList.length),e.systemModules.forEach(e=>{e.devices.splice(0,e.devices.length)})},setAddDeviceModal(e,t){e.showAddDeviceModal=t},setEditDeviceModal(e,t){e.showEditDeviceModal=t}},W={getDevices({dispatch:e}){d["a"].show(),setTimeout(()=>{const t=b.a.API_URL+"/devices",a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.get(t,{headers:o}).then(t=>{let a=t.data;e("handleStateDevices",a),d["a"].hide()}).catch(e=>{P(e.message)})},500)},addDevice({dispatch:e},t){d["a"].show();const a=new Promise((function(a,o){setTimeout(()=>{const s=b.a.API_URL+"/devices",r=n["a"].getItem("loggedInUserToken"),i={"Content-Type":"application/json",Authorization:"Bearer "+r};T.a.post(s,t,{headers:i}).then(t=>{d["a"].hide(),e("setAddDeviceModal",!1),e("getDevices"),c["a"].create("Device Added!"),a(t)}).catch(e=>{"Network Error"!=e.message?401!==e.response.status&&404!==e.response.status&&500!==e.response.status?o():P(e.response.data.message):P("Server Offline")})},500)}));return a},updateDevice({dispatch:e},t){return d["a"].show(),new Promise((function(a,o){setTimeout(()=>{const s=b.a.API_URL+"/devices/"+t.id,r=n["a"].getItem("loggedInUserToken"),i={"Content-Type":"application/json",Authorization:"Bearer "+r};T.a.put(s,t,{headers:i}).then(t=>{d["a"].hide(),e("setEditDeviceModal",!1),e("getDevices"),a(t),c["a"].create("Device Updated!")}).catch(e=>{"Network Error"!=e.message?401!==e.response.status&&404!==e.response.status&&500!==e.response.status?o():P(e.response.data.message):P("Server Offline")})},500)}))},deleteDevice({dispatch:e},t){d["a"].show(),setTimeout(()=>{const a=b.a.API_URL+"/devices/"+t,o=n["a"].getItem("loggedInUserToken"),s={"Content-Type":"application/json",Authorization:"Bearer "+o};T.a.delete(a,t,{headers:s}).then(t=>{d["a"].hide(),e("getDevices"),c["a"].create("Device Deleted!")}).catch(e=>{"Network Error"!=e.message?401!==e.response.status&&404!==e.response.status&&500!==e.response.status||P(e.response.data.message):P("Server Offline")})},500)},handleStateDevices({commit:e},t){e("clearDevicesData"),t.forEach(t=>{e("addDeviceList",t);let a=t.deviceName,o=t.deviceZone,s=t.deviceBelongTo,r=[];if("string"==typeof s){let t=JSON.parse(s);r=Array.from(t);let i={label:a,value:a,description:o,deviceModule:r};e("addSystemModuleDevice",i)}let i={label:a,value:a,description:o,deviceModule:r};e("addDevice",i)})},setAddDeviceModal({commit:e},t){e("setAddDeviceModal",t)},setEditDeviceModal({commit:e},t){e("setEditDeviceModal",t)}},J={getSystemModules:e=>e.systemModules,getModuleDevices:e=>t=>e.systemModules.filter(e=>e.value==t),showAddDeviceModal:e=>e.showAddDeviceModal,showEditDeviceModal:e=>e.showEditDeviceModal,primitiveZones:e=>e.devicesList.map(e=>e.deviceZone),uniqueZones:(e,t)=>[...new Set(t.primitiveZones)],getModuleActiveDevices:e=>t=>{let a=e.systemModules.filter(e=>e.value==t);return a=a[0].devices,a=a.map(e=>e.label),a},getAverageSpeedActiveTraps:(e,t,a,o)=>{let s=o["averageSpeed/averageSpeedList"];return s=s.map(e=>`Trap ${e.trap_number}-${e.id}`),s},primitiveZonesOfPayload:e=>e=>e.map(e=>e.description),uniqueZonesOfPayload:(e,t)=>e=>[...new Set(t.primitiveZonesOfPayload(e))],getDevicesTree:(e,t)=>e=>{let a=[],o=t.getModuleDevices(e);o=o[0].devices;let s=t.uniqueZonesOfPayload(o);return s.forEach(e=>{let t={label:"",icon:"gps_fixed",children:[]};t.label=e,o.forEach(a=>{let o={label:"",value:"",icon:"videocam"};a.description==e&&(o.label=a.label,o.value=a.value,t["children"].push(o))}),a.push(t)}),a},getAverageSpeedDevicesTree:(e,t,a,o)=>{let s=[],r=o["averageSpeed/averageSpeedSettings"];return r.forEach(e=>{let t=Object.keys(e)[0],a={label:"",icon:"gps_fixed",children:[]};a.label=t;let o=e[t];o.forEach(e=>{let t={label:"",value:"",disabled:!0,icon:"videocam"};t.label=`Trap ${e.trap_number}-${e.id}`,t.value="Trap "+e.trap_number,a["children"].push(t)}),s.push(a)}),s}};var Q={namespaced:!0,state:Z,mutations:H,actions:W,getters:J};const X={averageSpeedList:[],averageSpeedSettings:[],showAddAverageSpeedModal:!1,showEditAverageSpeedModal:!1},ee={addAverageSpeedList(e,t){e.averageSpeedList.push(t)},addAverageSpeedSettings(e,t){e.averageSpeedSettings.push(t)},clearAverageSpeedList(e){e.averageSpeedList.splice(0,e.averageSpeedList.length)},clearAverageSpeedSettings(e){e.averageSpeedSettings.splice(0,e.averageSpeedSettings.length)},setAddAverageSpeedModal(e,t){e.showAddAverageSpeedModal=t},setEditAverageSpeedModal(e,t){e.showEditAverageSpeedModal=t}},te={getAverageSpeedSettings({dispatch:e}){d["a"].show(),setTimeout(()=>{const t=b.a.API_URL+"/averageSpeedSettings",a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.get(t,{headers:o}).then(t=>{let a=t.data;e("handleStateAverageSpeedList",a)}).catch(e=>{P(e.message)})},500)},addAverageSpeedSettings({commit:e,dispatch:t},a){d["a"].show(),setTimeout(()=>{const e=b.a.API_URL+"/averageSpeedSettings",o=n["a"].getItem("loggedInUserToken"),s={"Content-Type":"application/json",Authorization:"Bearer "+o};T.a.post(e,a,{headers:s}).then(e=>{console.log(e.data),t("getAverageSpeedSettings"),t("setAddAverageSpeedModal",!1),d["a"].hide(),c["a"].create("Average Speed Road Successfully Added!")}).catch(e=>{console.log(e),P(e.message)})},500)},editAverageSpeedSettings({commit:e,dispatch:t},a,o){d["a"].show(),setTimeout(()=>{const o=a.oldRoadName,s=b.a.API_URL+"/averageSpeedSettings/"+o,r=n["a"].getItem("loggedInUserToken"),i={"Content-Type":"application/json",Authorization:"Bearer "+r};T.a.put(s,a,{headers:i}).then(a=>{console.log(a.data),e("clearAverageSpeedList"),t("getAverageSpeedSettings"),t("setEditAverageSpeedModal",!1),d["a"].hide(),c["a"].create("Average Speed Road Successfully Updated!")}).catch(e=>{console.log(e),P(e.message)})},500)},deleteAverageSpeedSettings({commit:e,dispatch:t},a){d["a"].show(),setTimeout(()=>{const o=b.a.API_URL+"/averageSpeedSettings/"+a,s=n["a"].getItem("loggedInUserToken"),r={"Content-Type":"application/json",Authorization:"Bearer "+s};T.a.delete(o,{headers:r}).then(a=>{e("clearAverageSpeedList"),t("getAverageSpeedSettings"),d["a"].hide(),c["a"].create("AverageSpeed Road Deleted!")}).catch(e=>{console.log(e),P(e.message)})},500)},handleStateAverageSpeedList({commit:e,getters:t,dispatch:a},o){d["a"].hide(),o.forEach(a=>{t.averageSpeed_id.includes(a.id)||e("addAverageSpeedList",a)}),a("handleStateAverageSpeedSettings")},handleStateAverageSpeedSettings({commit:e,getters:t}){e("clearAverageSpeedSettings");let a=t.uniqueRoadName;a.forEach(a=>{let o={},s=t.getRoadData(a);o[a]=s,e("addAverageSpeedSettings",o)})},setAddAverageSpeedModal({commit:e},t){e("setAddAverageSpeedModal",t)},setEditAverageSpeedModal({commit:e},t){e("setEditAverageSpeedModal",t)}},ae={averageSpeed_id:e=>e.averageSpeedList.map(e=>e.id),averageSpeedList:e=>e.averageSpeedList,averageSpeedSettings:e=>e.averageSpeedSettings,primitiveRoadName:e=>e.averageSpeedList.map(e=>e.road_name),uniqueRoadName:(e,t)=>[...new Set(t.primitiveRoadName)],getRoadData:e=>t=>e.averageSpeedList.filter(e=>e.road_name==t),showAddAverageSpeedModal:e=>e.showAddAverageSpeedModal,showEditAverageSpeedModal:e=>e.showEditAverageSpeedModal};var oe={namespaced:!0,state:X,mutations:ee,actions:te,getters:ae};const se={averageSpeedResults:[],searchedData:[],distinctDates:[],activeDateTime:{startDate:"",endDate:""},activeTraps:[],pagination:{limit:4,page:1,totalPages:0},filters:{dateTime:{isActive:!1,data:""},confidence_number:{isActive:!1,data:60},speed:{isActive:!1,data:10},confirmed:{isActive:!0}},sorters:{id:{isActive:!0,type:"DESC"},speed:{isActive:!1,type:"DESC"},confidence_number:{isActive:!1,type:"ASC"}},updateTransits:!1,lprDataDownloaded:!1,searchFlag:!1},re={addAverageSpeedResult(e,t){e.averageSpeedResults.push(t)},addSearchedLpr(e,t){e.searchedData.push(t)},clearAverageSpeedData(e){e.averageSpeedResults.splice(0,e.averageSpeedResults.length)},clearSearchedData(e){e.searchedData.splice(0,e.searchedData.length)},clearDistinctDates(e){e.distinctDates.splice(0,e.distinctDates.length)},fixArrayLength(e){console.log("removing first element"),e.averageSpeedResults.sort((function(e,t){return e.id-t.id})),e.averageSpeedResults.shift()},addDistinctDates(e,t){t.forEach(t=>{e.distinctDates.push(t.date)})},setActiveDateTime(e,t){Object.assign(e.activeDateTime,t)},setPagination(e,t){Object.assign(e.pagination,t)},setDeviceFilter(e,t){e.activeTraps.splice(0,e.activeTraps.length),t.forEach(t=>{e.activeTraps.push(t)})},setFilter(e,t){let a=t.filterName;Object.assign(e.filters[a],t.filterData)},setSorter(e,t){let a=t.activeSorter;"undefined"!==typeof a&&(e.sorters[a].isActive=!1);let o=t.sorterName;Object.assign(e.sorters[o],t.sorterData)},setUpdateTransits(e,t){e.updateTransits=t},setLprDataDownloaded(e,t){e.lprDataDownloaded=t},setSearchFlag(e,t){e.searchFlag=t}},ie={getAverageSpeedResults({commit:e,dispatch:t,getters:a}){t("setAverageSpeedDataDownloaded",!1);const o=a.getActiveFilter.hasOwnProperty("speed")?se.filters.speed.data:0,s=a.getActiveFilter.hasOwnProperty("confirmed")?se.filters.confirmed.isActive:"",r=b.a.API_URL+"/averageSpeedResults"+`?npp=${se.pagination.limit}&page=${se.pagination.page}\n      &startDate=${se.activeDateTime.startDate}&endDate=${se.activeDateTime.endDate}\n      &speedFilter=${o}\n      &confirmedFilter=${s}`;e("clearAverageSpeedData");const i=n["a"].getItem("loggedInUserToken"),d={"Content-Type":"application/json",Authorization:"Bearer "+i};setTimeout(()=>{T.a.get(r,{headers:d}).then(a=>{console.log("success --",a.data);let o=a.data.pagination,s=a.data.results;t("setAverageSpeedDataDownloaded",!0),t("handleStateAverageSpeedResults",s),s.length>0&&e("setPagination",{limit:o.perPage,page:o.current,totalPages:o.numPages})}).catch(e=>{P(e.message)})},300)},updateAverageSpeedResults({commit:e,dispatch:t,getters:a},o){t("handleStateAverageSpeedResults",o.results),o.results.length>0&&(e("setPagination",{totalPages:o.pagination.numPages,limit:o.pagination.perPage,page:o.pagination.current}),se.averageSpeedResults.length>se.pagination.limit&&e("fixArrayLength"))},getAverageSpeedDistinctDates({commit:e}){setTimeout(()=>{const t=b.a.API_URL+"/averageSpeedResults_distinctDates",a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.get(t,{headers:o}).then(t=>{let a=t.data;e("clearDistinctDates"),e("addDistinctDates",a)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},500)},searchAverageSpeedData({dispatch:e,commit:t},a){console.log("action searching average speed",a),t("clearAverageSpeedData"),t("clearSearchedData"),e("setAverageSpeedSearchFlag",!0),e("setUpdateAverageSpeedTransits",!1),setTimeout(()=>{const t=b.a.API_URL+"/averageSpeed_search",o=n["a"].getItem("loggedInUserToken"),s={"Content-Type":"application/json",Authorization:"Bearer "+o};let r={plateNumber:a};T.a.post(t,r,{headers:s}).then(t=>{let a=t.data;c["a"].create(`Found ( ${a.length} ) Plates Matches your search`),e("handleStateSearchedData",a),e("setAverageSpeedDataDownloaded",!0)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},500)},confirmLprPlate({commit:e,dispatch:t},a){console.log("confirm average speed",a),t("setAverageSpeedDataDownloaded",!1),setTimeout(()=>{const e=b.a.API_URL+"/averageSpeedResults/"+a.id,o=n["a"].getItem("loggedInUserToken"),s={"Content-Type":"application/json",Authorization:"Bearer "+o};T.a.put(e,a,{headers:s}).then(e=>{console.log("Confirm success..");const o=e.data;t("setAverageSpeedDataDownloaded",!0),0!=o.affectedRows?(c["a"].create(`( ${a.id} ) Confirmation Success..`),t("getAverageSpeedResults")):c["a"].create(`Sorry Can't Confirm ( ${a.id} ) Right Now..`)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},100)},handleStateAverageSpeedResults({commit:e,dispatch:t,getters:a},o){o.forEach(t=>{a.averageSpeedResults_id.includes(t.id)||e("addAverageSpeedResult",t)}),t("setAverageSpeedDataDownloaded",!0)},handleStateSearchedData({commit:e,dispatch:t,getters:a},o){o.forEach(t=>{e("addSearchedLpr",t)}),e("setPagination",{totalPages:Math.ceil(se.searchedData.length/se.pagination.limit)});let s=a.paginatedTransits(se.searchedData);t("handleStateAverageSpeedResults",s),t("setAverageSpeedDataDownloaded",!0)},setActiveDateTime({commit:e,dispatch:t},a){e("setActiveDateTime",a),t("setUpdateAverageSpeedTransits",!1),t("setAverageSpeedPagination",{activeDateTime:!0,page:1})},setAverageSpeedPagination({commit:e,dispatch:t},a){let o=a.activeDateTime||!1,s=!0,r=Object.keys(a);r.forEach(e=>{a[e]!=se.pagination[e]&&(s=!1)}),s&!o||(se.pagination.page!=a.page&&e("clearAverageSpeedData"),e("setPagination",a),!se.updateTransits&!se.searchFlag&&t("getAverageSpeedResults"),se.searchFlag&&t("handleStateSearchedData",[]))},setDeviceFilter({commit:e},t){e("setDeviceFilter",t)},setAverageSpeedFilter({commit:e,dispatch:t},a){t("setAverageSpeedDataDownloaded",!1),e("clearAverageSpeedData"),e("setFilter",a),!se.updateTransits&!se.searchFlag&&t("getAverageSpeedResults"),se.searchFlag&&t("handleStateSearchedData",[])},setAverageSpeedSorter({commit:e,getters:t},a){let o=t.getActiveSorter,s=Object.keys(o);a.activeSorter=s[0],e("setSorter",a)},setUpdateAverageSpeedTransits({commit:e,dispatch:t},a){a&&(e("clearAverageSpeedData"),t("setAverageSpeedDataDownloaded",!1)),e("setUpdateTransits",a)},setAverageSpeedDataDownloaded({commit:e},t){d["a"].hide(),t||d["a"].show(),e("setLprDataDownloaded",t)},setAverageSpeedSearchFlag({commit:e,dispatch:t},a){a||(e("setPagination",{page:1}),t("getAverageSpeedResults")),e("setSearchFlag",a)}},ne={averageSpeedResults_id:e=>e.averageSpeedResults.map(e=>e.id),updateAverageSpeedTransits:e=>e.updateTransits,paginationData:e=>e.pagination,getActiveSorter:e=>{let t=Object.keys(e.sorters),a={};return t.forEach(t=>{e.sorters[t].isActive&&(a[t]=e.sorters[t])}),a},getActiveFilter:e=>{let t=Object.keys(e.filters),a={};return t.forEach(t=>{e.filters[t].isActive&&(a[t]=e.filters[t])}),a},filteredTransits:(e,t)=>{},sortedTransits:(e,t)=>{let a=Array.from(e.averageSpeedResults),o=t.getActiveSorter;if(Object.keys(o).length>0){let e=Object.keys(o)[0],t=o[e].type;"speed"==e&&(e="average_speed");let s=1,r=-1;"DESC"==t&&(s=-1,r=1),a.sort((t,a)=>{let o=0,i=parseInt(t[e]),n=parseInt(a[e]);return i>n?o=s:n>i&&(o=r),o})}return a},paginatedTransits:e=>t=>{const a=function(e,t,a){return t=Math.abs(parseInt(t)),t=t>0?t-1:t,a=parseInt(a),a=a<1?1:a,[...e.filter((e,o)=>o>=t*a&&o<(t+1)*a)]};let o=t,s=e.pagination,r=a(o,s.page,s.limit);return r}};var de={namespaced:!0,state:se,mutations:re,actions:ie,getters:ne};const le={reportingData:[],selectedData:[],violationToPrint:[],downloadAll:!1,activeModule:{label:"",value:""},activeDateTime:{startDate:"",endDate:""},distinctDates:[],showPrintViolationDialog:!1,reportingDataDownloaded:!0},ce={addReported(e,t){e.reportingData.push(t)},addSelectedData(e,t){let a=e.reportingData.find(e=>e.id==t);e.selectedData.push(a)},addDistinctDates(e,t){t.forEach(t=>{e.distinctDates.push(t.date)})},setViolationToPrint(e,{reportId:t,getters:a}){if("printAll"==t||"downloadAll"==t)return e.selectedData.forEach(t=>e.violationToPrint.push(t)),void(e.downloadAll="downloadAll"==t);let o=a.id_data(t);e.violationToPrint.push(o[0])},setActiveModule(e,t){Object.assign(e.activeModule,t)},setActiveDateTime(e,t){Object.assign(e.activeDateTime,t)},setReportingDataDownloaded(e,t){e.reportingDataDownloaded=t},setPrintViolationDialog(e,t){e.showPrintViolationDialog=t},clearReportingData(e){e.reportingData.splice(0,e.reportingData.length)},clearSelectedData(e,t){if("undefined"==typeof t)return void e.selectedData.splice(0,e.selectedData.length);let a=e.selectedData.findIndex(e=>e.id===t);e.selectedData.splice(a,1)},clearDistinctDates(e){e.distinctDates.splice(0,e.distinctDates.length)},clearViolationToPrint(e){e.violationToPrint.splice(0,e.violationToPrint.length)}},pe={getReportingData({commit:e,dispatch:t}){setTimeout(()=>{const e=b.a.API_URL+"/reporting?&activeModule="+le.activeModule.value+`&startDate=${le.activeDateTime.startDate}&endDate=${le.activeDateTime.endDate}`,a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.get(e,{headers:o}).then(e=>{console.log("success --",e.data);const a=e.data;a.hasOwnProperty("code")?"ER_EMPTY_QUERY"==a.code&&P(le.activeModule.label+" has no data on your System.."):(t("setReportingDataDownloaded",!0),t("handleStateReportedData",a))}).catch(e=>{P(e.message)})},500)},getDistinctDates({commit:e}){setTimeout(()=>{const t=b.a.API_URL+"/reporting_distinctDates?&moduleName="+le.activeModule.value,a=n["a"].getItem("loggedInUserToken"),o={"Content-Type":"application/json",Authorization:"Bearer "+a};T.a.get(t,{headers:o}).then(t=>{let a=t.data;e("clearDistinctDates"),e("addDistinctDates",a)}).catch(e=>{e.hasOwnProperty("response")?P(e.response.data.message):P(e.message)})},500)},setActiveModule({commit:e,dispatch:t},a){let o=""==le.activeModule.value;e("setActiveModule",a),t("handleActionsOperation",{firstMounted:o,action:"activeModule"})},setActiveDateTime({commit:e,dispatch:t},a){let o=""==le.activeDateTime.startDate;e("setActiveDateTime",a),t("handleActionsOperation",{firstMounted:o,action:"activeDateTime"})},setReportingDataDownloaded({commit:e},t){d["a"].hide(),t||d["a"].show(),e("setReportingDataDownloaded",t)},setViolationToPrint({commit:e,dispatch:t,getters:a},o){e("setViolationToPrint",{reportId:o,getters:a}),t("setPrintViolationDialog",!0)},setSelectedData({commit:e},t){"add"==t.action&&e("addSelectedData",t.id),"remove"==t.action&&e("clearSelectedData",t.id),"removeAll"==t.action&&(e("clearSelectedData"),e("clearViolationToPrint"))},setPrintViolationDialog({commit:e},t){e("setPrintViolationDialog",t)},handleActionsOperation({commit:e,dispatch:t},a){"activeDateTime"==a.action|"activeModule"==a.action&&(e("clearReportingData"),t("setReportingDataDownloaded",!1),a.firstMounted||t("getReportingData"),"activeModule"==a.action&&(t("getDistinctDates"),t("setSelectedData",{action:"removeAll"})))},handleStateReportedData({commit:e,dispatch:t,getters:a},o){o.forEach(t=>{a.reported_id.includes(t.id)||e("addReported",t)})},clearViolationToPrint({commit:e}){e("clearViolationToPrint")}},ge={reported_id:e=>e.reportingData.map(e=>e.id),selectedData_id:e=>e.selectedData.map(e=>e.id),id_data:e=>t=>e.reportingData.filter(e=>e.id===t)};var ue={namespaced:!0,state:le,mutations:ce,actions:pe,getters:ge};a("a79d");function me(e,t=""){"Network Error"!=e.message?401!==e.response.status&&404!==e.response.status||P(e.response.data.message):console.error(t+"Server Offline")}const he={host:b.a.API_URL.substring(0,b.a.API_URL.length-4),port:5006,screenToShow:null,selectedCameraIndex:null,devicesPerRow:1,removeIndex:null,cameras:[]},ve={addCamera(e,t){let a=e.cameras.find(({cameraId:e})=>e===t.cameraId);a?P("Already Exists"):e.cameras.push(window["camera_"+t.cameraId]=t),e.selectedCameraIndex=t.cameraId},removeCamera(e,t){let a=e.cameras.findIndex(e=>e.cameraId===t);e.removeIndex=a,e.cameras.splice(a,1)},resetSelectedCameraIndex(e){e.selectedCameraIndex=null},enableFaceDetection(e,t){let a=e.cameras.findIndex(e=>e.cameraId===t.cameraId);e.cameras[a].faceDetection=t.value},updateDetection(e,t){t.value?e.cameras[t.index].faceRecognition=t.value:null==t.value?e.cameras[t.index].faceDetection=!0:(e.cameras[t.index].faceDetection=t.value,e.cameras[t.index].faceRecognition=t.value)},enableFaceRecognition(e,t){let a=e.cameras.findIndex(e=>e.cameraId===t.cameraId);e.cameras[a].faceRecognition=!0},updateDevicesPerRow(e,t){e.devicesPerRow=t}},_e={addDevice({commit:e},t){let a,o;if("object"===typeof t)o="add",a=t;else if("number"==typeof t){o="play";let e=he.cameras.findIndex(e=>e.cameraId===t);a=he.cameras[e]}d["a"].show(),setTimeout(()=>new Promise((s,r)=>{let i=he.host+he.port+"/add_device";T.a.post(i,a).then(a=>{226==a.status&&c["a"].create(a.data.message);let s=a.data.data.replace(/[^\d.]/g,""),r=parseInt(s),i=he.host+he.port+"/video_feed/"+r,n=h()(h()({},t),{},{cameraId:r,videoFeedUrl:i,faceDetection:!1,faceRecognition:!1});"add"==o&&e("addCamera",n)}).catch(e=>{me(e)}).finally(d["a"].hide())}),500)},removeDevice({commit:e},t){d["a"].show(),setTimeout(()=>new Promise((a,o)=>{let s=he.host+he.port+"/terminate/"+t;console.log("Removing Device..."),e("removeCamera",t),T.a.get(s).then(e=>{a(e),console.log("Device Removed")}).catch(e=>{me(e)}).finally(d["a"].hide())}),500)},pauseDevice({commit:e},t){d["a"].show(),setTimeout(()=>new Promise((e,a)=>{let o=he.host+he.port+"/close/"+t;T.a.get(o).then(e=>{}).catch(e=>{me(e)}).finally(d["a"].hide())}),500)},updateFaceDetection({commit:e},t){d["a"].show(),setTimeout(()=>new Promise((a,o)=>{let s=he.host+he.port;t.value?s+="/face_recognition/":null==t.value?s+="/face_detection/":s+="/remove_facial/",s+=t.cameraId,T.a.get(s).then(a=>{e("updateDetection",t)}).catch(e=>{me(e)}).finally(d["a"].hide())}),500)},setDeviceFilter({commit:e},t){e("setDeviceFilter",t)},trainDataset(){d["a"].show(),setTimeout(()=>new Promise((e,t)=>{let a=he.host+he.port+"/train_dataset";T.a.get(a).then(e=>{}).catch(e=>{me(e)}).finally(d["a"].hide())}),500)}},fe={cameras:e=>e.cameras,message:e=>e.message,devicesPerRow:e=>e.devicesPerRow,activeDevices:e=>e.cameras.map(e=>e.deviceName)};var De={namespaced:!0,state:he,mutations:ve,actions:_e,getters:fe};a("c975");function Se({API_KEY:e,GROUP_KEY:t,id:a,name:o,host:s,port:r,username:i,password:n,path:d="/axis-media/media.amp?profile1"}){let l=`data={"mode":"start","name":"${o}","type":"h264","protocol":"rtsp","host":"${s}","port":"${r}","path":"${d}","shto": "[]","shfr": "[]","details": "{\\"max_keep_days\\":\\"\\",\\"notes\\":\\"\\",\\"dir\\":\\"\\",\\"rtmp_key\\":\\"\\",\\"auto_host_enable\\":\\"1\\",\\"auto_host\\":\\"rtsp://${s}:${r}${d}\\",\\"rtsp_transport\\":\\"tcp\\",\\"muser\\":\\"${i}\\",\\"mpass\\":\\"${n}\\",\\"port_force\\":\\"0\\",\\"fatal_max\\":\\"0\\",\\"skip_ping\\":null,\\"is_onvif\\":\\"1\\",\\"onvif_non_standard\\":null,\\"onvif_port\\":\\"80\\",\\"primary_input\\":\\"0:0\\",\\"aduration\\":\\"1000000\\",\\"probesize\\":\\"1000000\\",\\"stream_loop\\":\\"0\\",\\"sfps\\":\\"\\",\\"wall_clock_timestamp_ignore\\":null,\\"accelerator\\":\\"0\\",\\"hwaccel\\":\\"auto\\",\\"hwaccel_vcodec\\":\\"\\",\\"hwaccel_device\\":\\"\\",\\"stream_type\\":\\"hls\\",\\"stream_flv_type\\":\\"ws\\",\\"stream_flv_maxLatency\\":\\"\\",\\"stream_mjpeg_clients\\":\\"\\",\\"stream_vcodec\\":\\"copy\\",\\"stream_acodec\\":\\"no\\",\\"hls_time\\":\\"2\\",\\"hls_list_size\\":\\"3\\",\\"preset_stream\\":\\"ultrafast\\",\\"stream_quality\\":\\"15\\",\\"stream_fps\\":\\"2\\",\\"stream_scale_x\\":\\"\\",\\"stream_scale_y\\":\\"\\",\\"stream_rotate\\":null,\\"signal_check\\":\\"10\\",\\"signal_check_log\\":\\"0\\",\\"stream_vf\\":\\"\\",\\"tv_channel\\":\\"0\\",\\"tv_channel_id\\":\\"\\",\\"tv_channel_group_title\\":\\"\\",\\"stream_timestamp\\":\\"0\\",\\"stream_timestamp_font\\":\\"\\",\\"stream_timestamp_font_size\\":\\"\\",\\"stream_timestamp_color\\":\\"\\",\\"stream_timestamp_box_color\\":\\"\\",\\"stream_timestamp_x\\":\\"\\",\\"stream_timestamp_y\\":\\"\\",\\"stream_watermark\\":\\"0\\",\\"stream_watermark_location\\":\\"\\",\\"stream_watermark_position\\":\\"tr\\",\\"snap\\":\\"0\\",\\"snap_fps\\":\\"\\",\\"snap_scale_x\\":\\"\\",\\"snap_scale_y\\":\\"\\",\\"snap_vf\\":\\"\\",\\"vcodec\\":\\"copy\\",\\"crf\\":\\"1\\",\\"preset_record\\":\\"\\",\\"acodec\\":\\"no\\",\\"record_scale_y\\":\\"\\",\\"record_scale_x\\":\\"\\",\\"cutoff\\":\\"15\\",\\"rotate\\":null,\\"vf\\":\\"\\",\\"timestamp\\":\\"0\\",\\"timestamp_font\\":\\"\\",\\"timestamp_font_size\\":\\"10\\",\\"timestamp_color\\":\\"white\\",\\"timestamp_box_color\\":\\"0x00000000@1\\",\\"timestamp_x\\":\\"(w-tw)/2\\",\\"timestamp_y\\":\\"0\\",\\"watermark\\":\\"0\\",\\"watermark_location\\":\\"\\",\\"watermark_position\\":\\"tr\\",\\"record_timelapse\\":null,\\"record_timelapse_mp4\\":null,\\"record_timelapse_fps\\":null,\\"record_timelapse_scale_x\\":\\"\\",\\"record_timelapse_scale_y\\":\\"\\",\\"record_timelapse_vf\\":\\"\\",\\"record_timelapse_watermark\\":null,\\"record_timelapse_watermark_location\\":\\"\\",\\"record_timelapse_watermark_position\\":null,\\"cust_input\\":\\"\\",\\"cust_stream\\":\\"\\",\\"cust_snap\\":\\"\\",\\"cust_record\\":\\"\\",\\"cust_detect\\":\\"\\",\\"cust_detect_object\\":\\"\\",\\"cust_sip_record\\":\\"\\",\\"custom_output\\":\\"\\",\\"detector\\":\\"0\\",\\"detector_http_api\\":null,\\"detector_send_frames\\":\\"1\\",\\"detector_fps\\":\\"\\",\\"detector_scale_x\\":\\"640\\",\\"detector_scale_y\\":\\"480\\",\\"detector_lock_timeout\\":\\"\\",\\"detector_save\\":\\"0\\",\\"detector_record_method\\":\\"sip\\",\\"detector_trigger\\":\\"1\\",\\"detector_trigger_record_fps\\":\\"\\",\\"detector_timeout\\":\\"10\\",\\"detector_send_video_length\\":\\"\\",\\"watchdog_reset\\":\\"0\\",\\"detector_delete_motionless_videos\\":\\"0\\",\\"det_multi_trig\\":null,\\"group_detector_multi\\":\\"\\",\\"detector_webhook\\":\\"0\\",\\"detector_webhook_timeout\\":\\"\\",\\"detector_webhook_url\\":\\"\\",\\"detector_webhook_method\\":null,\\"detector_command_enable\\":\\"0\\",\\"detector_command\\":\\"\\",\\"detector_command_timeout\\":\\"\\",\\"snap_seconds_inward\\":\\"\\",\\"detector_mail\\":\\"0\\",\\"detector_mail_timeout\\":\\"\\",\\"detector_discordbot\\":null,\\"detector_discordbot_send_video\\":null,\\"detector_discordbot_timeout\\":\\"\\",\\"use_detector_filters\\":null,\\"use_detector_filters_object\\":null,\\"cords\\":\\"[]\\",\\"detector_filters\\":\\"\\",\\"detector_pam\\":\\"1\\",\\"detector_sensitivity\\":\\"\\",\\"detector_max_sensitivity\\":\\"\\",\\"detector_threshold\\":\\"1\\",\\"detector_color_threshold\\":\\"\\",\\"inverse_trigger\\":null,\\"detector_frame\\":\\"0\\",\\"detector_noise_filter\\":null,\\"detector_noise_filter_range\\":\\"\\",\\"detector_notrigger\\":\\"0\\",\\"detector_notrigger_mail\\":\\"0\\",\\"detector_notrigger_discord\\":null,\\"detector_notrigger_timeout\\":\\"\\",\\"detector_notrigger_webhook\\":null,\\"detector_notrigger_webhook_url\\":\\"\\",\\"detector_notrigger_webhook_method\\":null,\\"detector_notrigger_command_enable\\":null,\\"detector_notrigger_command\\":\\"\\",\\"detector_notrigger_command_timeout\\":\\"\\",\\"detector_audio\\":null,\\"detector_audio_min_db\\":\\"\\",\\"detector_audio_max_db\\":\\"\\",\\"detector_use_detect_object\\":\\"0\\",\\"detector_send_frames_object\\":null,\\"detector_obj_count_in_region\\":null,\\"detector_obj_region\\":null,\\"detector_use_motion\\":\\"1\\",\\"detector_fps_object\\":\\"\\",\\"detector_scale_x_object\\":\\"\\",\\"detector_scale_y_object\\":\\"\\",\\"detector_lisence_plate\\":\\"0\\",\\"detector_lisence_plate_country\\":\\"us\\",\\"detector_buffer_vcodec\\":\\"auto\\",\\"detector_buffer_acodec\\":null,\\"detector_buffer_fps\\":\\"\\",\\"event_record_scale_x\\":\\"\\",\\"event_record_scale_y\\":\\"\\",\\"detector_buffer_hls_time\\":\\"\\",\\"detector_buffer_hls_list_size\\":\\"\\",\\"detector_buffer_start_number\\":\\"\\",\\"detector_buffer_live_start_index\\":\\"\\",\\"control\\":\\"0\\",\\"control_base_url\\":\\"\\",\\"control_url_method\\":null,\\"control_digest_auth\\":null,\\"control_stop\\":\\"0\\",\\"control_url_stop_timeout\\":\\"\\",\\"control_turn_speed\\":\\"\\",\\"detector_ptz_follow\\":null,\\"detector_ptz_follow_target\\":\\"\\",\\"detector_obj_count\\":null,\\"control_url_center\\":\\"\\",\\"control_url_left\\":\\"\\",\\"control_url_left_stop\\":\\"\\",\\"control_url_right\\":\\"\\",\\"control_url_right_stop\\":\\"\\",\\"control_url_up\\":\\"\\",\\"control_url_up_stop\\":\\"\\",\\"control_url_down\\":\\"\\",\\"control_url_down_stop\\":\\"\\",\\"control_url_enable_nv\\":\\"\\",\\"control_url_disable_nv\\":\\"\\",\\"control_url_zoom_out\\":\\"\\",\\"control_url_zoom_out_stop\\":\\"\\",\\"control_url_zoom_in\\":\\"\\",\\"control_url_zoom_in_stop\\":\\"\\",\\"control_invert_y\\":null,\\"groups\\":\\"[]\\",\\"notify_email\\":null,\\"notify_discord\\":null,\\"notify_onUnexpectedExit\\":null,\\"loglevel\\":\\"warning\\",\\"sqllog\\":\\"0\\",\\"detector_cascades\\":\\"\\",\\"stream_channels\\":\\"\\",\\"input_maps\\":\\"\\",\\"input_map_choices\\":\\"\\"}"}`,c=`${e}/configureMonitor/${t}/${a}/add?${l}`;return c}const Ae={ip:"192.168.1.26",port:8080,credentials:{mail:"marco@aiactive.com",pass:"MAR@2021#ai"},keys:{API_KEY:null,GROUP_KEY:null},monitors:[],watchMonitors:[]},we=T.a.create({baseURL:`http://${Ae.ip}:${Ae.port}`}),be={setApiKey(e,t){e.keys.API_KEY=t},setGroupKey(e,t){e.keys.GROUP_KEY=t},setMonitors(e,t){e.monitors=t},setWatchingMonitors(e,t){let a=e.watchMonitors.includes(t);console.log("exists:",a),a?P("Already Watching"):e.watchMonitors.push(t)},unsetWatchingMonitors(e,t){const a=e.watchMonitors.indexOf(t);a>-1&&e.watchMonitors.splice(a,1)}},ye={login({commit:e,dispatch:t}){setTimeout(()=>{const a=new Promise((a,o)=>{let s="/?json=true",r=Ae.credentials;we.post(s,r).then(o=>{e("setApiKey",o.data.$user.auth_token),e("setGroupKey",o.data.$user.ke),a(o),console.log("Shinobi Loggedin"),t("getMonitors")}).catch(e=>{me(e,"Shinobi "),o(e)}).finally()});return a},500)},getMonitors({commit:e}){setTimeout(()=>{const t=new Promise((t,a)=>{let o=`${Ae.keys.API_KEY}/monitor/${Ae.keys.GROUP_KEY}`;we.get(o).then(a=>{let o=[];a.data.map(e=>{o.push({name:e.name,id:e.mid})}),e("setMonitors",o),t(a)}).catch(e=>{me(e)}).finally()});return t},500)},watchMonitor({commit:e},t){e("setWatchingMonitors",t)},unwatchMonitor({commit:e},t){e("unsetWatchingMonitors",t)},addMonitor({dispatch:e},t){console.log("addMonitor payload:",t),setTimeout(()=>new Promise((a,o)=>{let s=Se(h()(h()({},Ae.keys),t));we.get(s).then(t=>{e("getMonitors")}).catch(e=>{me(e)}).finally()}),500)},deleteMonitor({dispatch:e},t){console.log("delete Monitor",t),setTimeout(()=>new Promise((a,o)=>{let s=`${Ae.keys.API_KEY}/configureMonitor/${Ae.keys.GROUP_KEY}/${t}/delete`;console.log("api:",s),we.get(s).then(t=>{e("getMonitors"),a()}).catch(e=>{me(e),o()}).finally()}),500)}},Te={};var Pe={namespaced:!0,state:Ae,mutations:be,actions:ye,getters:Te};o["default"].use(v["a"]);var Ie=function(){const e=new v["a"].Store({modules:{server:R,auth:F,lpr:z,users:Y,devices:Q,averageSpeed:oe,averageSpeedResult:de,reporting:ue,facial:De,shinobi:Pe},strict:!1});return e},Ue=a("8c4f"),Me=a("8f0d");const Le=function(e,t,a){var o=n["a"].getItem("loggedInUserToken");o?a():a({name:"pathAuth",query:{redirect:e.name}})},Re=function(e,t,a){var o=n["a"].getItem("loggedInUserToken");o?a(t.path):a()};var Ee={isLoggedIn:Le,loginAuthConfig:Re};const ke=[{path:"/",component:()=>Promise.all([a.e(0),a.e(1),a.e(5)]).then(a.bind(null,"a9c3")),children:[{path:"",name:"homePage",component:()=>Promise.all([a.e(0),a.e(13)]).then(a.bind(null,"4331")),beforeEnter:Ee.isLoggedIn},{path:"/auth",name:"pathAuth",component:()=>Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"f724")),beforeEnter:Ee.loginAuthConfig},{path:"/userProfile",name:"userProfile",component:()=>Promise.all([a.e(0),a.e(14)]).then(a.bind(null,"08ef")),beforeEnter:Ee.isLoggedIn},{path:"/settings",name:"settings",component:()=>Promise.all([a.e(0),a.e(1),a.e(4)]).then(a.bind(null,"311b")),beforeEnter:Ee.isLoggedIn},{path:"/freeFlowLprModule",name:"freeFlowLprModule",component:()=>Promise.all([a.e(0),a.e(1),a.e(8)]).then(a.bind(null,"7143")),beforeEnter:Ee.isLoggedIn},{path:"/averageSpeedModule",name:"averageSpeedModule",component:()=>Promise.all([a.e(0),a.e(1),a.e(7)]).then(a.bind(null,"437d")),beforeEnter:Ee.isLoggedIn},{path:"/tollGatesModule",name:"tollGatesModule",component:()=>Promise.all([a.e(0),a.e(1),a.e(2)]).then(a.bind(null,"024d")),beforeEnter:Ee.isLoggedIn},{path:"/gatesModule",name:"gatesModule",component:()=>Promise.all([a.e(0),a.e(1),a.e(2)]).then(a.bind(null,"024d")),beforeEnter:Ee.isLoggedIn},{path:"/reportingModule",name:"reportingModule",component:()=>Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,"f8e3")),beforeEnter:Ee.isLoggedIn},{path:"/facial",name:"facial",component:()=>Promise.all([a.e(0),a.e(1),a.e(11)]).then(a.bind(null,"41f0")),beforeEnter:Ee.isLoggedIn},{path:"/VMS",name:"VMS",component:()=>Promise.all([a.e(0),a.e(1),a.e(6)]).then(a.bind(null,"6dbe")),beforeEnter:Ee.isLoggedIn}]},{path:"*",component:()=>Promise.all([a.e(0),a.e(12)]).then(a.bind(null,"e51e"))}];var Ce=ke;o["default"].use(Ue["a"]),o["default"].use(Me["a"]);var Oe=function(){const e=new Ue["a"]({scrollBehavior:()=>({x:0,y:0}),routes:Ce,mode:"hash",base:""});return e},je=async function(){const e="function"===typeof Ie?await Ie({Vue:o["default"]}):Ie,t="function"===typeof Oe?await Oe({Vue:o["default"],store:e}):Oe;e.$router=t;const a={router:t,store:e,render:e=>e(A),el:"#q-app"};return{app:a,store:e,router:t}};o["default"].prototype.$axios=T.a;var Fe=F.getters.loggedInStatus,xe=async({router:e,store:t})=>{let a=n["a"].getItem("loggedInUser");e.beforeEach((e,t,o)=>{if(Fe||"/auth"===e.path){if(null!=a&&Fe){if(!a.isActive)return n["a"].remove("loggedIn"),n["a"].remove("loggedInUser"),n["a"].remove("loggedInUserToken"),void P("your Account is Disabled..");if(!a.isAdmin&&"/settings"==e.path)return console.log("to auth"),void o("/userProfile")}o()}else o("/auth")})},Ne=a("5132"),$e=a.n(Ne);o["default"].use(new $e.a({debug:!1,connection:b.a.API_URL+"/client-server",vuex:{store:Ie,options:{useConnectionNamespace:!0}}}));var Be=a("1321"),ze=a.n(Be);o["default"].component("apexchart",ze.a);var Ve=async()=>{},Ge=a("a925"),Ke={Dashboard:"Dashboard",FreeFlow:"Free Flow",AverageSpeed:"Average Speed",TollGates:"Toll Gates",Gates:"Gates",Reporting:"Reporting",Settings:"Settings",Facial:"Facial",VMS:"VMS",Logout:"Logout",Login:"Login",Online:"Online",Offline:"Offline",AutoUpdate:"Auto Update",SearchPlate:"Search Plate",Speed:"Speed",Confidence:"Confidence",Confirm:"Confirm",Unconfirm:"Unconfirm",Edit:"Edit",Brand:"Brand",Model:"Model",Color:"Color",Class:"Class",ConfirmationData:"Confirmation Data",ID:"ID",PlateNo:"Plate No.",PlateImage:"Plate Image",vehicleImage:"Vehicle Image",Date:"Date",Image:"Image",ExportCSV:"Export to csv",Users:"Users",Devices:"Devices",Database:"Database",Notifications:"Notification",General:"General",Search:"Search",AddUser:"Add User",Username:"User Name",Email:"Email",Permission:"Permission",Status:"Status",Actions:"Actions",AddDevice:"Add Device",DeviceName:"Device Name",Type:"Type",Zone:"Zone",AddRoad:"Add Road",SelectLanguage:"Select Language",Search:"Search",Filters:"Filters",Sorters:"Sorters",Confirmed:"Confirmed",Pagination:"Pagination",Apply:"Apply"},qe={Dashboard:"لوحة معلومات",FreeFlow:"التدفق الحر",AverageSpeed:"متوسط السرعة",TollGates:"بوابات رسوم",Gates:"بوابات",Reporting:"تقارير",Settings:"إعدادات",Logout:"تسجيل خروج",Login:"تسجيل دخول",online:"متصل",offline:"غير متصل",Facial:"وجوه",VMS:"ادارة الفيديو",AutoUpdate:"تحديث تلقائى",SearchPlate:"بحث بالوحة",Speed:"سرعة",Confidence:"دقة",Confirm:"تأكيد",Unconfirm:"الغاء التأكيد",Edit:"تعديل",Brand:"ماركة",Model:"موديل",Color:"لون",Class:"CLASS",ConfirmationData:"تاريخ التأكيد",ID:"كود",PlateNo:"رقم اللوحة",PlateImage:"صورة اللوحة",vehicleImage:"صورة المركبة",Date:"تاريخ",Image:"صورة",ExportCSV:"استخراج تقرير",Users:"مستخدمين",Devices:"اجهزة",Database:"قاعدة بيانات",Notifications:"اشعارات",General:"عام",Search:"بحث",AddUser:"اضافة مستخدم",Username:"اسم المستخدم",Email:"بريد الكترونى",Permission:"صلاحية",Status:"حالة",Actions:"اجراءات",AddDevice:"اضافة جهاز",DeviceName:"اسم الجهاز",Type:"نوع",Zone:"منطقة",AddRoad:"اضافة طريق",SelectLanguage:"اختار اللغة",Search:"بحث",Filters:"فلاتر",Sorters:"ترتيب حسب",Confirmed:"تم التأكيد",Pagination:"ترقيم الصفحات",Apply:"تم"};const Ye={"en-us":Ke,ar:qe};var Ze=async({app:e,Vue:t})=>{t.use(Ge["a"]),e.i18n=new Ge["a"]({locale:"ar",fallbackLocale:"ar",messages:Ye})},He=({store:e})=>{e.dispatch("shinobi/login")};const We="";async function Je(){const{app:e,store:t,router:a}=await je();let s=!1;const r=e=>{s=!0;const t=Object(e)===e?a.resolve(e).route.fullPath:e;window.location.href=t},i=window.location.href.replace(window.location.origin,""),n=[void 0,xe,void 0,Ve,Ze,He];for(let l=0;!1===s&&l<n.length;l++)if("function"===typeof n[l])try{await n[l]({app:e,router:a,store:t,Vue:o["default"],ssrContext:null,redirect:r,urlPath:i,publicPath:We})}catch(d){return d&&d.url?void(window.location.href=d.url):void console.error("[Quasar] boot error:",d)}!0!==s&&new o["default"](e)}Je()},"39c6":function(e,t,a){var o="production",s={development:a("caf5"),production:a("3f2e"),staging:a("1a07")};e.exports=s[o]},"3cc2":function(e,t,a){"use strict";t["a"]=[{label:"Dashboard",icon:"list",to:"/",status:!0},{label:"FreeFlow",icon:"time_to_leave",to:"/freeFlowLprModule",status:!0},{label:"AverageSpeed",icon:"speed",to:"/averageSpeedModule",status:!0},{label:"TollGates",icon:"policy",to:"/tollGatesModule",status:!0},{label:"Gates",icon:"store",to:"/gatesModule",status:!0},{label:"Reporting",icon:"fingerprint",to:"/reportingModule",status:!0},{label:"Facial",icon:"photo_camera_front",to:"/facial",status:!0},{label:"VMS",icon:"switch_video",to:"/VMS",status:!0},{label:"Settings",icon:"settings",to:"/settings"}]},"3f2e":function(e,t,a){"use strict";a.r(t);var o=a("18d6");t["default"]={API_URL:o["a"].getItem("serverHost")||"http://192.168.1.77:3000"}},caf5:function(e,t,a){"use strict";a.r(t);var o=a("18d6");t["default"]={API_URL:""+o["a"].getItem("serverHost")||"http://192.168.1.165:3000"}}});